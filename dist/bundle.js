import{create as r,all as n}from"mathjs";import{ethers as t}from"ethers";function i(r,n,t){if(t||2===arguments.length)for(var i,e=0,o=n.length;e<o;e++)!i&&e in n||(i||(i=Array.prototype.slice.call(n,0,e)),i[e]=n[e]);return r.concat(i||Array.prototype.slice.call(n))}var e=t.utils.parseUnits,o=r(n,{epsilon:1e-12,precision:64,predictable:!1,randomSeed:null});function u(r){for(var n,i,e=[],u=1;u<arguments.length;u++)e[u-1]=arguments[u];var l=e[e.length-1],a=0,c=!1,f=e;"object"==typeof l&&(Object.keys(l).includes("hex")||Object.keys(l).includes("deci"))&&(c=null!==(n=l.hex)&&void 0!==n?n:c,a=null!==(i=+l.deci)&&void 0!==i?i:a,f=e.filter((function(r,n){return n!==e.length-1})));var d=Math.abs(a),v=f.map((function(r){return r?o.bignumber(String(r)):0})),g=o.chain(o[r](v[0],v[1]));if(v.length>2)for(var s=2,p=f.length;s<p;s++)g=g[r](String(f[s]));var h=o.format(g.done(),{notation:"fixed",precision:a>0?d:0});return(+h==1/0||o.isNaN(+h))&&(h="0"),"0"===l.deci||l?m(h,0,!1):a<0&&(h=String(S(h,d,!0))),l.fillZero||"string"!=typeof h||(h=h.replace(/(\.\d*[1-9])0+$|\.0*$/,"$1")),c?t.utils.parseUnits(h,null!=d?d:18):h}function l(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return u.apply(void 0,i(["add"],r,!1))}function a(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return u.apply(void 0,i(["subtract"],r,!1))}function c(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return u.apply(void 0,i(["multiply"],r,!1))}function f(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return u.apply(void 0,i(["divide"],r,!1))}function d(r,n){var t=e(r?String(r):"0"),i=e(n?String(n):"0");return t.lt(i)}function v(r,n){var t=e(r?String(r):"0"),i=e(n?String(n):"0");return t.lte(i)}function g(r,n){var t=e(r?String(r):"0"),i=e(n?String(n):"0");return t.gt(i)}function s(r,n){var t=e(r?String(r):"0"),i=e(n?String(n):"0");return t.gte(i)}function p(r,n){return void 0===n&&(n=18),t.utils.parseUnits(String(r),n)}function h(r,n,i){void 0===n&&(n=0),void 0===i&&(i=18);var e=Math.abs(n);if(!+r){return n?(0).toFixed(e):"0"}var o=t.utils.formatUnits(r,i);return n<0&&(o=S(o,e,!0)),m(o,e,!0)}function m(r,n,t){return void 0===n&&(n=0),void 0===t&&(t=!1),x(r,n,t,"fixed")}function S(r,n,t){return void 0===n&&(n=0),void 0===t&&(t=!1),x(r,n,t,"floor")}function b(r,n,t){return void 0===n&&(n=0),void 0===t&&(t=!1),x(r,n,t,"ceil")}function x(r,n,t,i){void 0===n&&(n=0),void 0===t&&(t=!1);var e=function(r){var n=!0;return(o.isNaN(+r)||null===r)&&(n=!1),String(r).startsWith("0x")&&(n=!1),n||console.log("数字不合法:",r),n}(r)?String(r):"0",u="0";if("ceil"===i?u=o.bignumber(e).toFixed(n,2):"floor"===i?u=o.bignumber(e).toFixed(n,3):"fixed"===i&&(u=o.bignumber(e).toFixed(n)),t)return u;var l=function(r){var n,t=null===(n=/\./g.exec(r))||void 0===n?void 0:n.index,i=r.slice(0,t),e=r.slice(t);return{iNum:i,dNum:t?e:""}}(u),a=l.iNum,c=l.dNum;return!c||/^.0+$/.test(c)?a:a+c.replace(/\.?0+$/,"")}function y(r){return isNaN(r)?0:r.toString().replace(/\d+/,(function(r){return r.replace(/(\d)(?=(\d{3})+$)/g,(function(r){return r+","}))}))}export{l as bpAdd,b as bpCeil,f as bpDiv,p as bpEthHex,m as bpFixed,S as bpFloor,h as bpFormat,g as bpGt,s as bpGte,d as bpLt,v as bpLte,c as bpMul,a as bpSub,y as toThousands};
